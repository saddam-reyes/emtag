<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Nota de Remisi√≥n EMTAG</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
    <!-- Estilos -->
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/aos.css">
  <link rel="stylesheet" href="css/nota.css">


</head>
<body>

<!-- Dentro del <body>... -->

<div class="container">
  <div class="nota">
    <!-- Encabezado con imagen -->
    <div class="nota-header">
      <img src="tu-logo-aqui.png" alt="Logo EMTAG" class="logo">
      <div class="bg-header"></div>
    </div>
<h2>Nota de Venta</h2>

    <!-- Fila de informaci√≥n -->
    <div class="info fila">
      <div class="campo">
        <label>Fecha:</label><br>
        <input type="date">
      </div>
      <div class="campo">
        <label>Cliente:</label><br>
        <input type="text" placeholder="Nombre del cliente">
      </div>
      <div class="campo">
        <label>Tel√©fono:</label><br>
        <input type="text" placeholder="Tel√©fono">
      </div>
    </div>

<table id="nota-table">
  <thead>
    <tr>
      <th>Cantidad</th>
      <th>Descripci√≥n</th>
      <th>Precio por juego ($)</th>
      <th>Precio unitario ($)</th>
      <th>Total ($)</th>
      <th>Eliminar</th>
    </tr>
  </thead>
  <tbody id="nota-body">
    <tr>
      <td><input type="number" class="cantidad" min="1" value="1"></td>
      <td><input type="text" class="descripcion"></td>
      <td><input type="number" class="precio-juego" min="0"></td>
      <td><input type="text" class="precio-unitario" readonly></td>
      <td><input type="text" class="total" readonly></td>
      <td><button class="btn eliminar">üóëÔ∏è</button></td>
    </tr>
  </tbody>
  <tfoot>
    <tr>
      <td colspan="4" style="text-align:right;">Total Final ($):</td>
      <td><input type="text" id="total-final" readonly></td>
      <td></td>
    </tr>
  </tfoot>
</table>


    <!-- Observaciones -->
    <div class="observaciones">
      <p><strong>Observaciones / Garant√≠a:</strong></p>
      <ul>
        <li>Garant√≠a de 12 meses en defectos de fabricaci√≥n.</li>
        <li>No cubre da√±os por mal uso, impactos o instalaciones incorrectas.</li>
        <li>Se recomienda instalaci√≥n por profesionales certificados.</li>
      </ul>
    </div>

    <!-- Firma -->
    <div class="firma">
      <p>Firma de entrega: ___________________________</p>
      <p>Nombre del cliente: ___________________________</p>
    </div>

    <!-- Pie -->
    <div class="footer">
      <p>Gracias por su preferencia. Cualquier duda o aclaraci√≥n, cont√°ctenos v√≠a WhatsApp.</p>
    </div>
  </div>

  <!-- Bot√≥n para eliminar el √∫ltimo √≠tem -->
<div style="text-align: right; margin-top: 0.5rem;">
  <button id="btn-eliminar-ultimo" style="
      background: var(--primary-color);
      border: none;
      color: var(--white-color);
      padding: 0.6rem 1.2rem;
      cursor: pointer;
      border-radius: 6px;
      font-family: var(--font-heading);
      text-transform: uppercase;
      letter-spacing: 1px;
    ">
    Eliminar √∫ltimo √≠tem
  </button>
</div>

  <!-- Botones -->
  <div class="botones">
    <button onclick="imprimirNota()"><i class="fa-solid fa-print"></i> Imprimir</button>
    <button onclick="convertirJPG()"><i class="fa-solid fa-image"></i> Guardar como JPG</button>
    <a href="https://wa.me/?text=Hola%20EMTAG%2C%20adjunto%20mi%20nota%20de%20remisi√≥n" target="_blank">
      <button class="whatsapp"><i class="fa-brands fa-whatsapp"></i> Enviar por WhatsApp</button>
    </a>
  </div>
</div>

<!-- Script para JPG -->
<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
<script>
function imprimirNota() {
  window.print();
}

function convertirJPG() {
  html2canvas(document.querySelector(".nota")).then(canvas => {
    let link = document.createElement('a');
    link.download = 'nota_remision_emtag.jpg';
    link.href = canvas.toDataURL("image/jpeg");
    link.click();
  });
}
</script>
<script>
  const tabla = document.getElementById("nota-table").getElementsByTagName("tbody")[0];

  function actualizarTotales() {
    let totalFinal = 0;
    document.querySelectorAll("#nota-body tr").forEach(fila => {
      const cantidad = parseFloat(fila.querySelector(".cantidad").value) || 0;
      const precioJuego = parseFloat(fila.querySelector(".precio-juego").value) || 0;
      const precioUnitario = (precioJuego / 4).toFixed(2);

      fila.querySelector(".precio-unitario").value = isNaN(precioUnitario) ? '' : precioUnitario;
      const total = (cantidad * precioJuego).toFixed(2);
      fila.querySelector(".total").value = isNaN(total) ? '' : total;

      totalFinal += parseFloat(total) || 0;
    });

    document.getElementById("total-final").value = totalFinal.toFixed(2);
  }

  function agregarFila() {
    const nuevaFila = document.createElement("tr");
    nuevaFila.innerHTML = `
      <td><input type="number" class="cantidad" min="1" value="1"></td>
      <td><input type="text" class="descripcion"></td>
      <td><input type="number" class="precio-juego" min="0"></td>
      <td><input type="text" class="precio-unitario" readonly></td>
      <td><input type="text" class="total" readonly></td>
      <td><button class="btn eliminar">üóëÔ∏è</button></td>
    `;
    tabla.appendChild(nuevaFila);
    actualizarTotales();
  }

  tabla.addEventListener("input", (e) => {
    if (["cantidad", "precio-juego"].includes(e.target.className)) {
      actualizarTotales();
    }
  });

  tabla.addEventListener("keydown", (e) => {
    if (e.key === "Enter") {
      e.preventDefault();
      agregarFila();
    }
  });

  tabla.addEventListener("click", (e) => {
    if (e.target.classList.contains("eliminar")) {
      e.target.closest("tr").remove();
      actualizarTotales();
    }
  });

  actualizarTotales();
</script>


</body>
</html>
 


